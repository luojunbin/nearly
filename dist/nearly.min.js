!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("react")):"function"==typeof define&&define.amd?define(["react"],e):"object"==typeof exports?exports.Nearly=e(require("react")):t.Nearly=e(t.React)}(this,function(t){return function(t){function e(n){if(r[n])return r[n].exports;var o=r[n]={exports:{},id:n,loaded:!1};return t[n].call(o.exports,o,o.exports,e),o.loaded=!0,o.exports}var r={};return e.m=t,e.c=r,e.p="",e(0)}([function(t,e,r){t.exports=r(6)},function(t,e,r){"use strict";function n(t,e){if(void 0===u[t])throw Error("configure does not supports "+t);for(var r in e)u[t].hasOwnProperty(r)&&(u[t][r]=e[r])}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){var r=[],n=!0,o=!1,i=void 0;try{for(var u,s=t[Symbol.iterator]();!(n=(u=s.next()).done)&&(r.push(u.value),!e||r.length!==e);n=!0);}catch(a){o=!0,i=a}finally{try{!n&&s["return"]&&s["return"]()}finally{if(o)throw i}}return r}return function(e,r){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();e.configure=n;var i=e.parser={nrSplit:function(t){var e=t.split("::"),r=o(e,2),n=r[0],i=r[1];return{storeName:n,dispatcherName:i}},nrImport:function(t){var e=t.split("#")[0];return r(7)("./"+e+".js")},nrTarget:function(t,e){if(t[e])return t[e];switch(e){case"testState":return function(t,e){return e}}throw Error("the module does not export function "+e)}},u=e.config={parser:i}},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){return l[t]?l[t]:l[t]=new p(t,e)}function i(t){0===l[t].components.length&&(l[t]=void 0)}function u(t){return l[t]}Object.defineProperty(e,"__esModule",{value:!0});var s=Object.assign||function(t){for(var e=1;arguments.length>e;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},a=function(){function t(t,e){for(var r=0;e.length>r;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}();e.registerStore=o,e.unregisterStore=i,e.getStore=u;var c=r(1),f=r(3),p=function(){function t(e,r){n(this,t),this.storeName=e,this.state=null,this.components=[],this.getState=this.getState.bind(this),this.dispatch=this.dispatch.bind(this),this.dispatchers=r||c.parser.nrImport(e)}return a(t,[{key:"getState",value:function(){return s({},this.state)}},{key:"initState",value:function(t){if(0>=this.components.length){if("function"!=typeof this.dispatchers.init)throw Error("'init' of Dispatcher file "+this.storeName+" does not exist");var e=this.dispatchers.init(this.getState);(0,f.isPromise)(e)?e.then(this.dispatch):t.state=this.state=e}}},{key:"subscribe",value:function(t){this.components.push(t)}},{key:"unsubscribe",value:function(t){this.components=this.components.filter(function(e){return e!==t})}},{key:"dispatch",value:function(t){var e=this;return null!==t&&(this.state=s({},this.state,t),this.components.forEach(function(t){return t.setState(e.state)})),this.state}}]),t}(),l={}},function(t,e){"use strict";function r(t){return!!t&&(t instanceof Promise||"function"==typeof t.then)}function n(t){return t.name||t.displayName||"Component"}Object.defineProperty(e,"__esModule",{value:!0}),e.isPromise=r,e.getComponentName=n},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function u(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function s(t,e,r){var n=function(n){function s(e){o(this,s);var r=i(this,Object.getPrototypeOf(s).call(this,e));return r.store=(0,l.registerStore)(t),r}return u(s,n),c(s,[{key:"componentWillMount",value:function(){this.store.initState(this)}},{key:"componentDidMount",value:function(){this.store.subscribe(this)}},{key:"componentWillUnmount",value:function(){this.store.unsubscribe(this),this.store=(0,l.unregisterStore)(t)}},{key:"render",value:function(){return this.state?p["default"].createElement(e,a({},this.state,{_storeName:t},this.props)):!!r&&p["default"].createElement(r)}}]),s}(p["default"].Component);return n.displayName=(0,h.getComponentName)(e)+"-"+t,n}Object.defineProperty(e,"__esModule",{value:!0});var a=Object.assign||function(t){for(var e=1;arguments.length>e;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},c=function(){function t(t,e){for(var r=0;e.length>r;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}();e.connect=s;var f=r(8),p=n(f),l=r(2),h=r(3)},function(t,e,r){"use strict";function n(t){for(var e=i.parser.nrSplit(t),r=e.storeName,n=e.dispatcherName,o=(0,u.getStore)(r),a=i.parser.nrTarget(o.dispatchers,n),c=arguments.length,f=Array(c>1?c-1:0),p=1;c>p;p++)f[p-1]=arguments[p];var l=a.apply(o,[o.getState].concat(f));return(0,s.isPromise)(l)?l.then(o.dispatch):o.dispatch(l)}function o(){for(var t=arguments.length,e=Array(t),r=0;t>r;r++)e[r]=arguments[r];return n.bind.apply(n,[null].concat(e))}Object.defineProperty(e,"__esModule",{value:!0}),e.dispatch=n,e.dispatcher=o;var i=r(1),u=r(2),s=r(3)},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(4);Object.defineProperty(e,"connect",{enumerable:!0,get:function(){return n.connect}});var o=r(2);Object.defineProperty(e,"getStore",{enumerable:!0,get:function(){return o.getStore}}),Object.defineProperty(e,"registerStore",{enumerable:!0,get:function(){return o.registerStore}});var i=r(5);Object.defineProperty(e,"dispatch",{enumerable:!0,get:function(){return i.dispatch}}),Object.defineProperty(e,"dispatcher",{enumerable:!0,get:function(){return i.dispatcher}});var u=r(1);Object.defineProperty(e,"configure",{enumerable:!0,get:function(){return u.configure}})},function(t,e,r){function n(t){return r(o(t))}function o(t){return i[t]||function(){throw Error("Cannot find module '"+t+"'.")}()}var i={"./config.js":1,"./connect.js":4,"./dispatch.js":5,"./index.js":6,"./store.js":2,"./utils.js":3};n.keys=function(){return Object.keys(i)},n.resolve=o,t.exports=n,n.id=7},function(e,r){e.exports=t}])});